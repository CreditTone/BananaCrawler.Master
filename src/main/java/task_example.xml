<?xml version="1.0" encoding="UTF-8"?>
<Task name="test">
	<Thread>10</Thread>
	<DownloadControl>
		<Download>192.168.0.2</Download>
		<Download>192.168.0.3</Download>
	</DownloadControl>
	<Queue type="DelayedPriorityBlockingQueue">
		<DelayInMilliseconds>1000</DelayInMilliseconds>
	</Queue>
	<!-- 
		<Queue type="RedisRequestBlockingQueue">
		</Queue>
	-->
	<StartContext>
		<PageRequest processor="listProcessor">
			<Url>http://www.zxysz.com/archives/category/khp</Url>
		</PageRequest>
	</StartContext>
	<PageProcessor name="listProcessor">
		<Process>
			<CrawlData>
				<Parse key="subject">
					<Xpath>title</Xpath>				
				</Parse>
				<ArrayParse key="movies">
					<Root>
						<Xpath>li.p-item</Xpath>
					</Root>
					<Parse key="img">
						<Xpath attr="file">img.sl_lazyimg</Xpath>				
					</Parse>
					<Parse key="title">
						<Xpath attr="alt">img.sl_lazyimg</Xpath>				
					</Parse>
					<Parse key="date">
						<Pattern>更新于 ([\\d\\-]+)</Pattern>					
					</Parse>
				</ArrayParse>
			</CrawlData>
			<PageRequest processor="listProcessor" priority="100" pageEncoding="utf-8">
				<UrlParse>
					<Xpath attr="href">a[class=next page-numbers]</Xpath>
				</UrlParse>
			</PageRequest>
		</Process>
	</PageProcessor>
	<PageProcessor name="movieProcessor">
		<CrawlData>
			<Parse key="moveName">
				<Xpath>div[class=entry-title title]</Xpath>			
			</Parse>
			<Parse key="movieVersion">
				<Xpath>p.name</Xpath>					
			</Parse>
		</CrawlData>
	</PageProcessor>
</Task>