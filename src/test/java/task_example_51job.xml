<?xml version="1.0" encoding="UTF-8"?>
<!-- Task 的name属性必须要有，定义task的名字 -->
<Task name="51job">
	<!-- Thread配置下载线程数，不配置默认是Downloader的个数 -->
	<Thread>10</Thread>
	
	<!-- DownloadControl配置下载的Downloader主机，不配置默认使用所有节点下载 -->
	<!-- <DownloadControl>
		<Download>192.168.0.2</Download>
		<Download>192.168.0.3</Download>
	</DownloadControl> -->
	
	
	<Queue type="DelayedPriorityBlockingQueue">
		<DelayInMilliseconds>1000</DelayInMilliseconds>
	</Queue>
	<!-- 
		<Queue type="RedisRequestBlockingQueue">
		</Queue>
	-->
	<StartContext>
		<PageRequest processor="listProcessor">
			<Url>http://search.51job.com/list/000000%252C00,000000,0000,00,9,99,%25CF%25FA%25CA%25DB,0,1.html?lang=c&amp;stype=2</Url>
		</PageRequest>
	</StartContext>
	<PageProcessor name="listProcessor">
		<Process>
			<PageRequest processor="jobProcessor">
				<UrlParse>
					<Xpath attr="href">div[class=el] p a[onmousedown]</Xpath>
				</UrlParse>
			</PageRequest>
			<PageRequest processor="listProcessor" priority="100" pageEncoding="utf-8">
				<UrlParse>
					<Xpath attr="href">a:contains(下一页)</Xpath>
				</UrlParse>
			</PageRequest>
		</Process>
	</PageProcessor>
	<PageProcessor name="jobProcessor">
		<CrawlData>
			<Parse key="title">
				<Xpath>h1</Xpath>			
			</Parse>
			<Parse key="salary">
				<Pattern>&gt;([\d-]+)/月&lt;</Pattern>					
			</Parse>
			<Parse key="info">
				<Xpath>div[class=bmsg job_msg inbox]</Xpath>
			</Parse>
		</CrawlData>
	</PageProcessor>
</Task>